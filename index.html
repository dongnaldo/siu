<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIU</title>

  <style>
    body { 
      font-family: Arial; 
      margin: 0;
      background-color: #fff;
    }

    /* í™”ë©´ ì „ì²´ ì»¨í…Œì´ë„ˆ */
    .screen {
      position: relative;
      width: 412px;
      margin: 0 auto;
    }

    /* Figmaì—ì„œ ê°€ì ¸ì˜¨ ì „ì²´ ì´ë¯¸ì§€ */
    .bg {
      width: 100%;
      display: block;
    }

    /* ì´ë¯¸ì§€ ìœ„ ë²„íŠ¼ */
    .overlay-btn {
      position: absolute;
      bottom: 130px; 
      left: 50%;
      transform: translateX(-50%);
      width: 160px;
      height: 45px;
      font-size: 17px;
      font-weight: 600;
      background: #6C5CE7;
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* ê²Œì‹œê¸€ ì‘ì„± UI */
    #writePage, #listPage {
      display: none;
      width: 412px;
      margin: 20px auto;
      padding: 10px;
    }

    .postItem {
      border: 1px solid #ddd;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
    }
  </style>
</head>
<body>

  <!-- ğŸ”¥ ì²« í™”ë©´: Figma ì´ë¯¸ì§€ + ë²„íŠ¼ -->
  <div class="screen" id="homeScreen">
    <img src="Android Compact - 1.png" class="bg">
    <button class="overlay-btn" id="goWriteBtn">ê²Œì‹œê¸€ ì‘ì„±í•˜ê¸°</button>
  </div>


  <!-- ğŸ”¥ ê¸€ ì‘ì„± í™”ë©´ -->
  <div id="writePage">
    <h2>ê²Œì‹œê¸€ ì‘ì„±</h2>
    <input type="text" id="titleInput" placeholder="ì œëª© ì…ë ¥" style="width:100%;"><br><br>
    <textarea id="contentInput" placeholder="ë‚´ìš© ì…ë ¥" style="width:100%; height:120px;"></textarea>
    <br><br>
    <button id="addPostBtn">ê²Œì‹œê¸€ ì¶”ê°€</button>
    <button onclick="showHome()">í™ˆìœ¼ë¡œ</button>
  </div>


  <!-- ğŸ”¥ ê²Œì‹œê¸€ ëª©ë¡ í™”ë©´ -->
  <div id="listPage">
    <h2>ê²Œì‹œê¸€ ëª©ë¡</h2>
    <div id="postList"></div>
    <button onclick="showHome()">í™ˆìœ¼ë¡œ</button>
  </div>


  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <script>
    // Firebase ì„¤ì •
    const firebaseConfig = {
      apiKey: "AIzaSyBgKHGln9fdP3Fo4P_cm0CK3Vwl4GeTeUE",
      authDomain: "dongnaldo-51239.firebaseapp.com",
      projectId: "dongnaldo-51239",
      storageBucket: "dongnaldo-51239.firebasestorage.app",
      messagingSenderId: "129624651466",
      appId: "1:129624651466:web:ff1069d13895f9b537e633",
      measurementId: "G-M3M2B819Q3"
    };

    // Firebase ì´ˆê¸°í™”
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // í™”ë©´ ì´ë™ ê¸°ëŠ¥
    function showHome() {
      homeScreen.style.display = "block";
      writePage.style.display = "none";
      listPage.style.display = "none";
    }
    function showWrite() {
      homeScreen.style.display = "none";
      writePage.style.display = "block";
      listPage.style.display = "none";
    }
    function showList() {
      homeScreen.style.display = "none";
      writePage.style.display = "none";
      listPage.style.display = "block";
    }

    // ì²« í™”ë©´ ë²„íŠ¼
    document.getElementById("goWriteBtn").addEventListener("click", () => {
      showWrite();
    });

    // ê²Œì‹œê¸€ ì¶”ê°€
    document.getElementById("addPostBtn").addEventListener("click", async () => {
      const title = titleInput.value.trim();
      const content = contentInput.value.trim();

      if (!title || !content) {
        alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”!");
        return;
      }

      await db.collection("posts").add({
        title,
        content,
        createdAt: new Date()
      });

      alert("ê²Œì‹œê¸€ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
      titleInput.value = "";
      contentInput.value = "";

      loadPosts();
      showList();
    });

    // ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
    async function loadPosts() {
      const postList = document.getElementById("postList");
      postList.innerHTML = "";

      const snapshot = await db.collection("posts").orderBy("createdAt", "desc").get();

      snapshot.forEach(doc => {
        const p = doc.data();
        const div = document.createElement("div");
        div.className = "postItem";
        div.innerHTML = `
          <h3>${p.title}</h3>
          <p>${p.content}</p>
          <small>${p.createdAt.toDate()}</small>
        `;
        postList.appendChild(div);
      });
    }
  </script>

</body>
</html>
